<!DOCTYPE html>
<html  lang="zh-CN" >
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, maximum-scale=5, viewport-fit=cover">
    <title>转盘抽奖库 lottery-wheel | keyboard3的博客</title>
    <meta name="description" content="原文一个帮助你实现转盘抽奖游戏的库。使用了Snap.svg和anime.js。demo 使用npm install lottery-wheel 或者下载最新版release。然后在你的 HTML 中引用 lottery-wheel.min.js 或者 lottery-wheel.js &lt;script src&#x3D;&quot;&#x2F;path&#x2F;to&#x2F;lottery-wheel.min.js&quot;&gt;&lt;&#x2F;sc">
<meta property="og:type" content="article">
<meta property="og:title" content="转盘抽奖库 lottery-wheel">
<meta property="og:url" content="https://keyboard3.github.io/lottery-wheel/index.html">
<meta property="og:site_name" content="keyboard3的博客">
<meta property="og:description" content="原文一个帮助你实现转盘抽奖游戏的库。使用了Snap.svg和anime.js。demo 使用npm install lottery-wheel 或者下载最新版release。然后在你的 HTML 中引用 lottery-wheel.min.js 或者 lottery-wheel.js &lt;script src&#x3D;&quot;&#x2F;path&#x2F;to&#x2F;lottery-wheel.min.js&quot;&gt;&lt;&#x2F;sc">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://github.com/fralonra/lottery-wheel/blob/master/doc/images/data.png">
<meta property="og:image" content="https://github.com/fralonra/lottery-wheel/blob/master/doc/images/prize.png">
<meta property="og:image" content="https://github.com/fralonra/lottery-wheel/raw/master/doc/images/theme-light.png">
<meta property="og:image" content="https://github.com/fralonra/lottery-wheel/raw/master/doc/images/theme-dark.png">
<meta property="og:image" content="https://github.com/fralonra/lottery-wheel/raw/master/doc/images/color.png">
<meta property="og:image" content="https://github.com/fralonra/lottery-wheel/blob/master/doc/images/image.png">
<meta property="article:published_time" content="2020-04-11T15:15:04.000Z">
<meta property="article:modified_time" content="2022-03-31T15:14:13.114Z">
<meta property="article:author" content="keyboard3">
<meta property="article:tag" content="翻译">
<meta property="article:tag" content="js">
<meta property="article:tag" content="animate">
<meta property="article:tag" content="library">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/fralonra/lottery-wheel/blob/master/doc/images/data.png">

    <link rel="alternate" type="application/atom+xml" href="/blog/atom.xml">
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">

    
<link rel="stylesheet" href="/blog/css/common.min.css">



    
        <link href="//cdn.jsdelivr.net/npm/katex@0.9.0/dist/katex.min.css" rel="stylesheet">
    
    
    
    
        <link href="//cdn.jsdelivr.net/npm/lightgallery.js@1.1.3/dist/css/lightgallery.min.css" rel="stylesheet">
    
    
    
<link rel="stylesheet" href="/blog/css/iconfont.min.css">

    
<meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/blog/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/blog/css/prism-line-numbers.css" type="text/css"></head>

    <body>
        <header class="header header-fixture">
    <div class="profile-search-wrap flex sm:block">
        
        
        <div class="profile sm:text-center md:px-1 lg:px-3 sm:pb-4 sm:pt-6">
            <a id="avatar" role="link" href="https://github.com/keyboard3" class="inline-block lg:w-16 lg:h-16 w-8 h-8 m-2" target="_blank" rel="noopener" rel="noreferrer" >
                <img src="https://www.gravatar.com/avatar/5a65c2880a8f2804b5af3dc39819bdf1?s=128" class="rounded-full" alt="avatar">
            </a>
            <h2 id="name" class="hidden lg:block">keyboard3</h2>
            <h3 id="title" class="hidden lg:block">单身男青年</h3>
            
            <small id="location" class="hidden lg:block">
                <i class="iconfont icon-map-icon"></i>
                home
            </small>
            
        </div>
        
        
<div class="search flex-1 flex lg:inline-block sm:hidden lg:px-4 lg:mt-2 lg:mb-4 lg:w-full">
    <form id="search-form" class="my-auto flex-1 lg:border lg:border-solid lg:border-gray-200">
        <div class="input-group table bg-gray-100 lg:bg-white w-full">
            <input id="search-input" type="text" placeholder="搜索" class="inline-block w-full bg-gray-100 lg:bg-white">
            <span class="table-cell">
                <button name="search tigger button" disabled>
                    <i class="iconfont icon-search m-2"></i>
                </button>
            </span>
        </div>
    </form>
        
<div id="content-json" data-placeholder="搜索" class="invisible hidden">/content.json</div>
<script id="search-teamplate" type="text/html" data-path="/blog/content.json">
    <div>
        <div class="search-header bg-gray-400">
            <input id="actual-search-input" model="keyword" ref="input" class="inline-block w-full h-10 px-2 py-1" placeholder="搜索" type="text">
        </div>
        <div class="search-result bg-gray-200">
            {{#each searchPosts}}
            <a href="/{{ path }}" class="result-item block px-2 pb-3 mb-1 pt-1 hover:bg-indigo-100">
                <i class="iconfont icon-file"></i>
                <h1 class="result-title inline font-medium text-lg">{{ title }}</h1>
                <p class="result-content text-gray-600 text-sm">{{{ text }}}</p>
            </a>
            {{/each}}
        </div>
    </div>
</script>

</div>


        <button name="menu toogle button" id="menu-toggle-btn" class="block sm:hidden p-3" role="button" aria-expanded="false">
            <i class="iconfont icon-hamburger"></i>
        </button>
    </div>
    <nav id="menu-nav" class="hidden sm:flex flex-col">
        
        
            <div class="menu-item menu-home" role="menuitem">
                <a href="/blog/.">
                    <i class="iconfont icon-home" aria-hidden="true"></i>
                    <span class="menu-title">首页</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-archives" role="menuitem">
                <a href="/blog/archives">
                    <i class="iconfont icon-archive" aria-hidden="true"></i>
                    <span class="menu-title">归档</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-repository" role="menuitem">
                <a href="/blog/repository">
                    <i class="iconfont icon-project" aria-hidden="true"></i>
                    <span class="menu-title">项目</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-about" role="menuitem">
                <a href="/blog/about">
                    <i class="iconfont icon-cup" aria-hidden="true"></i>
                    <span class="menu-title">关于</span>
                </a>
            </div>
        
        
<div class="social-links flex sm:flex-col lg:hidden mt-5">
    
        <span class="social-item text-center">
            <a href="https://github.com/keyboard3" target="_blank" rel="noopener">
                <i class="iconfont social-icon icon-github"></i>
                <span class="menu-title hidden lg:inline">menu.github</span>
            </a>
        </span>
    
        <span class="social-item text-center">
            <a href="/blog/atom.xml">
                <i class="iconfont social-icon icon-rss"></i>
                <span class="menu-title hidden lg:inline">menu.rss</span>
            </a>
        </span>
    
</div>


    </nav>
</header>

        <section class="main-section">
            
    <main class="flex-1 px-4 py-14 md:px-5 lg:px-8 lg:py-4 relative min-h-screen">
    

    <article class="content article article-archives article-type-list" itemscope="">
        <header class="article-header">
            
    
        <h1 class="article-title text-lg" itemprop="name">
            转盘抽奖库 lottery-wheel
        </h1>
    



            <p class="article-meta mb-3 text-xs">
                <span class="article-date">
    <i class="iconfont icon-calendar-check"></i>
	<a href="/blog/lottery-wheel/" class="article-date">
	  <time datetime="2020-04-11T15:15:04.000Z" itemprop="datePublished">4月 11</time>
	</a>
</span>

                

                
    <span class="article-tags">
    <i class="iconfont icon-tag"></i>
    <a class="article-tag-link" href="/blog/tags/animate/" rel="tag">animate</a>, <a class="article-tag-link" href="/blog/tags/js/" rel="tag">js</a>, <a class="article-tag-link" href="/blog/tags/library/" rel="tag">library</a>, <a class="article-tag-link" href="/blog/tags/%E7%BF%BB%E8%AF%91/" rel="tag">翻译</a>
  </span>


                <span class="_partial/post-comment"><i class="icon icon-comment"></i>
                    <a href="/blog/lottery-wheel/#comments" class="article-comment-link">
                        评论
                    </a>
                </span>
                
    
        <span class="post-wordcount" itemprop="wordCount">字数统计: 1.5k(字)</span>
    
    
        <span class="post-readcount" itemprop="timeRequired">阅读时长: 6(分)</span>
    


            </p>
        </header>
        <div class="marked-body article-body">
            <p><a href="https://github.com/fralonra/lottery-wheel" target="_blank" rel="noopener">原文</a><br>一个帮助你实现转盘抽奖游戏的库。使用了<a href="https://github.com/adobe-webplatform/Snap.svg" target="_blank" rel="noopener">Snap.svg</a>和<a href="https://github.com/juliangarnier/anime/" target="_blank" rel="noopener">anime.js</a>。<br><a href="https://fralonra.github.io/lottery-wheel/demo/" target="_blank" rel="noopener">demo</a></p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><pre class="line-numbers language-shell"><code class="language-shell">npm install lottery-wheel<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>或者下载最新版<a href="https://github.com/fralonra/lottery-wheel/releases" target="_blank" rel="noopener">release</a>。<br>然后在你的 HTML 中引用 lottery-wheel.min.js 或者 lottery-wheel.js</p>
<pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/path/to/lottery-wheel.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>假设在你的 html 文件中有一个 id 为”wheel”的元素。</p>
<pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wheel<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>然后你可以使用下面的代码来创建抽奖轮盘:</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">const</span> wheel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Wheel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"wheel"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      text<span class="token punctuation">:</span> <span class="token string">"apple"</span><span class="token punctuation">,</span>
      chance<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      text<span class="token punctuation">:</span> <span class="token string">"banana"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      text<span class="token punctuation">:</span> <span class="token string">"orange"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      text<span class="token punctuation">:</span> <span class="token string">"peach"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">onSuccess</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><h3 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h3><ul>
<li>constructor(option)<br>option 详情看<a href="https://github.com/fralonra/lottery-wheel#options" target="_blank" rel="noopener">下面</a></li>
<li>draw()<br>当 draw 属性被设置为 false 时，手动渲染轮子。<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">const</span> wheel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Wheel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"wheel"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"Beijing"</span><span class="token punctuation">,</span> <span class="token string">"London"</span><span class="token punctuation">,</span> <span class="token string">"New York"</span><span class="token punctuation">,</span> <span class="token string">"Tokyo"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  draw<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  wheel<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
</ul>
<h3 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h3><table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
<th>类型</th>
<th>默认值</th>
</tr>
</thead>
<tbody><tr>
<td>el</td>
<td>当轮子被挂载的元素.<a href="https://github.com/fralonra/lottery-wheel#el" target="_blank" rel="noopener">详情</a></td>
<td>Object</td>
<td>-</td>
</tr>
<tr>
<td>data</td>
<td>奖品数组。<a href="https://github.com/fralonra/lottery-wheel#data" target="_blank" rel="noopener">详情</a></td>
<td>Array</td>
<td>-</td>
</tr>
<tr>
<td>pos</td>
<td>转轮的左上角与父元素关联 (el 元素)</td>
<td>Array</td>
<td>[0,0]</td>
</tr>
<tr>
<td>radius</td>
<td>转轮的半径, px</td>
<td>Number</td>
<td>100</td>
</tr>
<tr>
<td>buttonText</td>
<td>按钮上的文字</td>
<td>String</td>
<td>‘Draw’</td>
</tr>
<tr>
<td>fontSize</td>
<td>奖品上的文字大小</td>
<td>Number</td>
<td>(自动生成)</td>
</tr>
<tr>
<td>buttonWidth</td>
<td>button 的宽度,px</td>
<td>Number</td>
<td>50</td>
</tr>
<tr>
<td>buttonFontSize</td>
<td>button 上文本的大小</td>
<td>Number</td>
<td>(自动生成)</td>
</tr>
<tr>
<td>limit</td>
<td>转轮可以运行的最大次数</td>
<td>Number</td>
<td>0 (不限制)</td>
</tr>
<tr>
<td>duration</td>
<td>动画要执行多久 单位是毫秒</td>
<td>Number</td>
<td>5000</td>
</tr>
<tr>
<td>turn</td>
<td>在动画期间，转轮旋转的最小圈数</td>
<td>Number</td>
<td>4</td>
</tr>
<tr>
<td>draw</td>
<td>true 的话，转轮将在实例被创建时立刻渲染。否则你可以调用<a href="https://github.com/fralonra/lottery-wheel#draw" target="_blank" rel="noopener">draw</a>手动渲染它。</td>
<td>Boolean</td>
<td>true</td>
</tr>
<tr>
<td>clockwise</td>
<td>true 的话，旋转运动将是顺时针。否则，将是逆时针方向</td>
<td>Boolean</td>
<td>true</td>
</tr>
<tr>
<td>theme</td>
<td>预设置使用的颜色 <a href="https://github.com/fralonra/lottery-wheel#themes" target="_blank" rel="noopener">详情</a></td>
<td>String</td>
<td>default</td>
</tr>
<tr>
<td>image</td>
<td>允许你使用图片资源渲染转轮。看<a href="https://github.com/fralonra/lottery-wheel#image" target="_blank" rel="noopener">image</a></td>
<td>Object</td>
<td>-</td>
</tr>
<tr>
<td>color</td>
<td>用来重写当前主题颜色的对象。看<a href="https://github.com/fralonra/lottery-wheel#themes" target="_blank" rel="noopener">themes</a></td>
<td>Object</td>
<td>-</td>
</tr>
<tr>
<td>onSuccess</td>
<td>当奖品被领取成功会调用这个回调函数。<a href="https://github.com/fralonra/lottery-wheel#onsuccess" target="_blank" rel="noopener">详情</a></td>
<td>Function</td>
<td>-</td>
</tr>
<tr>
<td>onFail</td>
<td>超过领取限制次数时，尝试领取会调用这个回调函数</td>
<td>Function</td>
<td>-</td>
</tr>
<tr>
<td>onButtonHover</td>
<td>当鼠标划过按钮上时触发回调 <a href="https://github.com/fralonra/lottery-wheel#onbuttonhover" target="_blank" rel="noopener">详情</a></td>
<td>Function</td>
<td>-</td>
</tr>
</tbody></table>
<h4 id="el"><a href="#el" class="headerlink" title="el"></a>el</h4><p>el 属性定义了在哪个元素上渲染转轮。你应该传递一个 DOM 元素：</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">const</span> wheel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Wheel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"wheel"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="data"><a href="#data" class="headerlink" title="data"></a>data</h4><p>这个 data 属性使用数组来定义转轮游戏关联的事务。数组的长度要在 3 和 12 之间。</p>
<p>最简单的方式是将每个奖品的名字放到数组中：</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">const</span> wheel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Wheel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"wheel"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"Beijing"</span><span class="token punctuation">,</span> <span class="token string">"London"</span><span class="token punctuation">,</span> <span class="token string">"New York"</span><span class="token punctuation">,</span> <span class="token string">"Tokyo"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>它将会生成下面带默认 options 的转轮。每个奖品奖项都有相同的机会被抽奖，程序创建 4 个奖品对象，text 属性被 data 数组中的字符串设置，chance 属性自动为 1。<br><img src="https://github.com/fralonra/lottery-wheel/blob/master/doc/images/data.png" alt=""><br>你也可以自定义每个奖品的对象。奖品对象的属性在<a href="https://github.com/fralonra/lottery-wheel#prize-object" target="_blank" rel="noopener">这里</a>被列出来</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">const</span> wheel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Wheel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"wheel"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      text<span class="token punctuation">:</span> <span class="token string">"Beijing"</span><span class="token punctuation">,</span>
      chance<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      text<span class="token punctuation">:</span> <span class="token string">"London"</span><span class="token punctuation">,</span>
      chance<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">"New York"</span><span class="token punctuation">,</span>
    <span class="token string">"Tokyo"</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="onSuccess"><a href="#onSuccess" class="headerlink" title="onSuccess"></a>onSuccess</h4><p>当奖品被领取成功之后，回调函数被调用。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
<th>类型</th>
</tr>
</thead>
<tbody><tr>
<td>data</td>
<td>领取奖品对象</td>
<td>Object</td>
</tr>
</tbody></table>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">const</span> wheel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Wheel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"wheel"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"prize A"</span><span class="token punctuation">,</span> <span class="token string">"prize B"</span><span class="token punctuation">,</span> <span class="token string">"prize C"</span><span class="token punctuation">,</span> <span class="token string">"prize D"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">onSuccess</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Congratulations! You picked up </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>text<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="onFail"><a href="#onFail" class="headerlink" title="onFail"></a>onFail</h4><p>尝试已经达到领取限制时调用这个回调。(限制是 limit 属性)。注意默认可以领取无限次</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">const</span> wheel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Wheel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"wheel"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"prize A"</span><span class="token punctuation">,</span> <span class="token string">"prize B"</span><span class="token punctuation">,</span> <span class="token string">"prize C"</span><span class="token punctuation">,</span> <span class="token string">"prize D"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  limit<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token function">onFail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"You have no more chance to draw"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在这种情况下，如果你已经领取奖品，下次点击这个按钮将会弹出警告对话框。</p>
<h4 id="onButtonHover"><a href="#onButtonHover" class="headerlink" title="onButtonHover"></a>onButtonHover</h4><p>当鼠标滑过按钮时会调用</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
<th>类型</th>
</tr>
</thead>
<tbody><tr>
<td>anime</td>
<td>引用 animejs。看这个使用<a href="https://github.com/juliangarnier/anime" target="_blank" rel="noopener">文档</a></td>
<td>-</td>
</tr>
<tr>
<td>button</td>
<td>参考按钮所在的捕获元素</td>
<td>Object</td>
</tr>
</tbody></table>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">const</span> wheel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Wheel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"wheel"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"prize A"</span><span class="token punctuation">,</span> <span class="token string">"prize B"</span><span class="token punctuation">,</span> <span class="token string">"prize C"</span><span class="token punctuation">,</span> <span class="token string">"prize D"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">onButtonHover</span><span class="token punctuation">(</span>anime<span class="token punctuation">,</span> button<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">anime</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      targets<span class="token punctuation">:</span> button<span class="token punctuation">.</span>node<span class="token punctuation">,</span>
      scale<span class="token punctuation">:</span> <span class="token number">1.2</span><span class="token punctuation">,</span>
      duration<span class="token punctuation">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>奖品对象</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
<th>类型</th>
<th>默认</th>
</tr>
</thead>
<tbody><tr>
<td>text</td>
<td>奖品名字</td>
<td>String</td>
<td>‘’</td>
</tr>
<tr>
<td>chance</td>
<td>奖品可以被领取的可能性。值越高，奖品被领取的概率越大。概率计算的公式 <code>probability = 1 * chance / (每个chance的和)</code></td>
<td>Number</td>
<td>1</td>
</tr>
<tr>
<td>color</td>
<td>奖品的背景颜色 (重写转轮的 color.prize)</td>
<td>String</td>
<td>-</td>
</tr>
<tr>
<td>fontColor</td>
<td>文本的颜色 (重写转轮的 color.fontColor)</td>
<td>String</td>
<td>-</td>
</tr>
<tr>
<td>fontSize</td>
<td>文本的大小（将重写转轮的 fontSize）</td>
<td>Number</td>
<td>-</td>
</tr>
</tbody></table>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">const</span> wheel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Wheel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"wheel"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      text<span class="token punctuation">:</span> <span class="token string">"Beijing"</span><span class="token punctuation">,</span>
      color<span class="token punctuation">:</span> <span class="token string">"silver"</span><span class="token punctuation">,</span>
      fontSize<span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      text<span class="token punctuation">:</span> <span class="token string">"London"</span><span class="token punctuation">,</span>
      fontColor<span class="token punctuation">:</span> <span class="token string">"#008000"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">"New York"</span><span class="token punctuation">,</span>
    <span class="token string">"Tokyo"</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>上面的代码的转轮结果是<br><img src="https://github.com/fralonra/lottery-wheel/blob/master/doc/images/prize.png" alt=""></p>
<h4 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h4><p>主题是个存储转轮颜色的对象。它有下面的属性：</p>
<ul>
<li>border: 转轮边框的背景颜色</li>
<li>prize: 奖品部分的背景颜色</li>
<li>button: 按钮部分的背景颜色</li>
<li>line: 奖品部分之间的线条颜色</li>
<li>prizeFont: 奖品文本的颜色</li>
<li>buttonFont: 按钮文本的颜色</li>
</ul>
<p>下面是 3 个预设置的主题：</p>
<ul>
<li>default</li>
</ul>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    border<span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
    prize<span class="token punctuation">:</span> <span class="token string">'gold'</span><span class="token punctuation">,</span>
    button<span class="token punctuation">:</span> <span class="token string">'darkorange'</span><span class="token punctuation">,</span>
    line<span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
    prizeFont<span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
    buttonFont<span class="token punctuation">:</span> <span class="token string">'white'</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>light</li>
</ul>
<pre><code>light: {
    border: 'orange',
    prize: 'lightyellow',
    button: 'tomato',
    line: 'orange',
    prizeFont: 'orange',
    buttonFont: 'white'
}</code></pre><p><img src="https://github.com/fralonra/lottery-wheel/raw/master/doc/images/theme-light.png" alt=""></p>
<ul>
<li>dark</li>
</ul>
<pre class="line-numbers language-js"><code class="language-js">dark<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    border<span class="token punctuation">:</span> <span class="token string">'silver'</span><span class="token punctuation">,</span>
    prize<span class="token punctuation">:</span> <span class="token string">'dimgray'</span><span class="token punctuation">,</span>
    button<span class="token punctuation">:</span> <span class="token string">'darkslategray'</span><span class="token punctuation">,</span>
    line<span class="token punctuation">:</span> <span class="token string">'silver'</span><span class="token punctuation">,</span>
    prizeFont<span class="token punctuation">:</span> <span class="token string">'silver'</span><span class="token punctuation">,</span>
    buttonFont<span class="token punctuation">:</span> <span class="token string">'lightyellow'</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://github.com/fralonra/lottery-wheel/raw/master/doc/images/theme-dark.png" alt=""><br>你可以通过设置 color 属性来改变颜色</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">const</span> wheel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Wheel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"wheel"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"Beijing"</span><span class="token punctuation">,</span> <span class="token string">"London"</span><span class="token punctuation">,</span> <span class="token string">"New York"</span><span class="token punctuation">,</span> <span class="token string">"Tokyo"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  theme<span class="token punctuation">:</span> <span class="token string">"dark"</span><span class="token punctuation">,</span>
  color<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    button<span class="token punctuation">:</span> <span class="token string">"#fef5e7"</span><span class="token punctuation">,</span>
    buttonFont<span class="token punctuation">:</span> <span class="token string">"#34495e"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://github.com/fralonra/lottery-wheel/raw/master/doc/images/color.png" alt=""></p>
<h4 id="Image"><a href="#Image" class="headerlink" title="Image"></a>Image</h4><p>使用 image 属性让你可以通过对象的设置，使用一个已存在的资源来渲染转轮。它生成图像 svg 元素，并支持 jpeg,png 和 svg 格式。<br>属性</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
<th>类型</th>
</tr>
</thead>
<tbody><tr>
<td>turntable</td>
<td>转盘图片</td>
<td>String</td>
</tr>
<tr>
<td>button</td>
<td>按钮的图片。宽度由 buttonWidth 控制，剩下的按照比列缩放。默认在转盘的中心</td>
<td>String</td>
</tr>
<tr>
<td>offset</td>
<td>按钮的 y 轴的偏移。如果是负，按钮向上移动</td>
<td>Number</td>
</tr>
</tbody></table>
<p>这里的案例显示当时用仓库下的/doc/images 的图片的效果：</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">const</span> wheel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Wheel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"wheel"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"Prize A"</span><span class="token punctuation">,</span> <span class="token string">"Prize B"</span><span class="token punctuation">,</span> <span class="token string">"Prize C"</span><span class="token punctuation">,</span> <span class="token string">"Prize D"</span><span class="token punctuation">,</span> <span class="token string">"Prize E"</span><span class="token punctuation">,</span> <span class="token string">"Prize F"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  image<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    turntable<span class="token punctuation">:</span> <span class="token string">"turntable.png"</span><span class="token punctuation">,</span>
    button<span class="token punctuation">:</span> <span class="token string">"button.png"</span><span class="token punctuation">,</span>
    offset<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://github.com/fralonra/lottery-wheel/blob/master/doc/images/image.png" alt=""></p>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>我开了分支，为它支持了 remoteDrawn 属性，支持了奖品有远程接口支持的功能<br><a href="https://github.com/keyboard3/lottery-wheel" target="_blank" rel="noopener">keyboard3/lottery-wheel</a></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
        </div>
        
<blockquote class="copyright">
    <p><strong>本文链接 : </strong><a class="permalink" href="https://keyboard3.github.io/lottery-wheel/">https://keyboard3.github.io/lottery-wheel/</a></p>
    <p><strong>This article is available under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreferrer">Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)</a> License</strong></p>
</blockquote>


    </article>
    
    <section id="comments">
        
            <div id="vcomments"></div>
        
    </section>


    

</main>


<aside style="" id="sidebar" class="aside aside-fixture">
    <div class="toc-sidebar">
        <nav id="toc" class="article-toc">
            <h3 class="toc-title">文章目录</h3>
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#使用"><span class="toc-number">1.</span> <span class="toc-text">使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#API"><span class="toc-number">2.</span> <span class="toc-text">API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Methods"><span class="toc-number">2.1.</span> <span class="toc-text">Methods</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Options"><span class="toc-number">2.2.</span> <span class="toc-text">Options</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#el"><span class="toc-number">2.2.1.</span> <span class="toc-text">el</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#data"><span class="toc-number">2.2.2.</span> <span class="toc-text">data</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#onSuccess"><span class="toc-number">2.2.3.</span> <span class="toc-text">onSuccess</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#onFail"><span class="toc-number">2.2.4.</span> <span class="toc-text">onFail</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#onButtonHover"><span class="toc-number">2.2.5.</span> <span class="toc-text">onButtonHover</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#主题"><span class="toc-number">2.2.6.</span> <span class="toc-text">主题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Image"><span class="toc-number">2.2.7.</span> <span class="toc-text">Image</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#最后"><span class="toc-number">3.</span> <span class="toc-text">最后</span></a></li></ol>
        </nav>
    </div>
</aside>





        </section>
        <footer class="hidden lg:block fixed bottom-0 left-0 sm:w-1/12 lg:w-1/6 bg-gray-100 z-40">
    
    <div class="footer-social-links">
        
            <a href="https://github.com/keyboard3" target="_blank" rel="noopener">
                <i class="iconfont icon-github"></i>
            </a>
        
            <a href="/blog/atom.xml">
                <i class="iconfont icon-rss"></i>
            </a>
        
    </div>
    
    
        <p class="footer-custom">浙ICP备2022008282号</p>
        <p class="theme-brand">Theme by <a href="https://github.com/fengkx/hexo-theme-purer" target="_blank" rel="nofollow noopener noreferrer noopener">hexo-theme-purer</a></p>
    
</footer>

        <div id="mask" class="hidden mask fixed inset-0 bg-gray-900 opacity-75 z-40"></div>
        <div id="search-view-container" class="hidden shadow-xl"></div>
        
<script src="/blog/js/dom-event.min.js"></script>



<script src="/blog/js/local-search.min.js"></script>


    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//cdn.jsdelivr.net/npm/valine"></script>
<script type="text/javascript">
var GUEST = ['nick', 'mail', 'link'];
var meta = '';
meta = meta.split(',').filter(function(item) {
  return GUEST.indexOf(item) > -1;
});
new Valine({
  el: '#vcomments',
  verify: 'false',
  notify: 'false',
  appId: '',
  appKey: '',
  placeholder: 'just go go',
  avatar: 'mm',
  meta: meta,
  pageSize: '10' || 10,
  visitor: 'true',
  lang: ''
});
</script>



    <script src="//cdn.jsdelivr.net/npm/lightgallery.js@1.1.3/dist/js/lightgallery.min.js"></script>
    
<script src="/blog/js/light-gallery.min.js"></script>






    </body>
</html>
